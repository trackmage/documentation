<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-workflow/Webhooks">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="preconnect" href="https://vega.dev.trackmage.com/">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setRequestMethod","POST"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),_paq.push(["enableHeartBeatTimer"]),function(){var e="https://vega.dev.trackmage.com/";_paq.push(["setRequestMethod","POST"]),_paq.push(["setTrackerUrl",e+"mm.php"]),_paq.push(["setSiteId","2"]);var a=document,t=a.createElement("script"),p=a.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.src=e+"mjs.php",p.parentNode.insertBefore(t,p)}()</script><title data-rh="true">Webhooks Guide | TrackMage Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.trackmage.com/docs/workflow/webhooks.html"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Webhooks Guide | TrackMage Documentation"><meta data-rh="true" name="description" content="With webhooks you can receive updates about particular entities."><meta data-rh="true" property="og:description" content="With webhooks you can receive updates about particular entities."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.trackmage.com/docs/workflow/webhooks.html"><link data-rh="true" rel="alternate" href="https://docs.trackmage.com/docs/workflow/webhooks.html" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.trackmage.com/docs/workflow/webhooks.html" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7ea85a65.css">
<link rel="preload" href="/assets/js/runtime~main.3ebd573d.js" as="script">
<link rel="preload" href="/assets/js/main.e6297e1f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.jpg" alt="TrackMage Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/logo.jpg" alt="TrackMage Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">TrackMage Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a href="https://api.trackmage.com/?ui=re_doc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Api Reference<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://api.trackmage.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Try API methods online<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/authorization">Authorization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/standard-entity-fields.html">Standard Entity Fields</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/errors.html">Errors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/workspaces.html">Workspaces</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/shipment/shipment.html">Shipment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/order/order.html">Order</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/product/product.html">Product</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/workflow/workflow.html">Workflow</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/workflow/workflow.html">Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/workflow/webhooks.html">Webhooks</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/custom-fields.html">Custom Fields</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/carriers.html">Carriers</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/trackmage-sdks/php-sdk.html">TrackMage SDKs</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/tracking-widgets.html">Widgets</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Workflow</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Webhooks</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Webhooks Guide</h1></header><p>With webhooks you can receive updates about particular entities.
After you subscribed to a webhook you&#x27;ll be receiving events when the entity is created, updated or deleted.</p><p>For example, you can rely on webhooks to trigger an action in your app when an order is created, or when tracking status of shipment is updated.
By using webhooks subscriptions you can make fewer API calls overall, which makes sure that your apps are more efficient and update quickly.</p><p>You can view this <a href="https://www.youtube.com/watch?v=rxjkoeN0uMs" target="_blank" rel="noopener noreferrer">video</a> to better understand how webhooks work in TrackMage.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-setup-the-webhooks">How to setup the Webhooks<a class="hash-link" href="#how-to-setup-the-webhooks" title="Direct link to heading">​</a></h2><p>You can enable the webhook from the Automation / Webhooks page in the <a href="https://app.trackmage.com/" target="_blank" rel="noopener noreferrer">TrackMage admin panel</a> --&gt; Add webhook --&gt; Enter Webhook URL -&gt; Select entities and events to start receiving updates.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="securing-webhooks">Securing Webhooks<a class="hash-link" href="#securing-webhooks" title="Direct link to heading">​</a></h2><p>We currently support either HTTP or HTTPS URLs, so you can have security by using an SSL-enabled URL.
To restrict access for your webhook endpoint we allow use two types of authorization:</p><ul><li><strong>Basic</strong> - an HTTP authentication using username and password.</li><li><strong>Bearer</strong> - an HTTP authentication scheme that involves security tokens called bearer tokens.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="frequency-of-updates-and-concurrency">Frequency of updates and Concurrency<a class="hash-link" href="#frequency-of-updates-and-concurrency" title="Direct link to heading">​</a></h2><p>For each webhook you can set up frequency of updates.</p><ul><li><strong>Immediately</strong>: the update will be sent as soon as a tracking number status changes.</li><li><strong>5 minutes - 6 hours</strong>: Webhook accumulates the updates and will send them in a batch.</li></ul><p>How Concurrency works:<br>
Let&#x27;s say, in the webhook buffer there are 1500 tracking numbers. Before the sending, the buffer is always split into portions or batches. The number of requests depends on the amount of tracking numbers to send and on the batch size. Currently, the batch size is 500.
The webhook buffer gets empty on success response. If response status is an error (4xx, 5xx), the tracking numbers will remain in the queue. If the response status is 401 - the webhook will be disabled.
Partially submitted data will not be submitted again. For example, if webhook was able to submit 500 tracking numbers out of 1000, on the next call it will submit only remaining 500 (not 1000 like it used to).</p><p>Example 1. The concurrency is set to 1 (or none).</p><p>The batches will be sent consequently, so requests will not be sent in parallel.
The next batch will be sent only after the response from the previous has been received. In case if response status is error it&#x27;ll stop sending the others.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[500][500][500] =&gt; receiver</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Example 2. The concurrency is 3 and all requests are sent in parallel.</p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[500]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[500] =&gt; receiver</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[500]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>On error, it will not stop but will try to send the next request. At the end, all not-accepted requests will be scheduled for the next webhook call.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="anatomy-of-webhook">Anatomy of Webhook<a class="hash-link" href="#anatomy-of-webhook" title="Direct link to heading">​</a></h2><p>After you configure a webhook subscription, the events that you specified will schedule or send immediately (depended on your webhook settings)
a webhook notification.
TrackMage sends event driven data to webhook URL via POST method.
This notification contains a JSON payload with event data and authorization header (basic or bearer) if Auth Type is set in the webhook settings.</p><p>JSON payload is represented by list of objects with four properties:</p><ul><li><strong>&quot;entity&quot;</strong>- the entity for which the webhook triggered</li><li><strong>&quot;event&quot;</strong> - the event type create/update/delete</li><li><strong>&quot;data&quot;</strong> - the entity&#x27;s data</li><li><strong>&quot;updatedFields&quot;</strong> - the list of updated fields codes (empty for create/delete events)</li></ul><p>For example, the shipments/update webhook contains:</p><p><strong>Header</strong></p><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">authorization: Basic eDE6eDI=</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">content-length: 1007</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">content-type: application/json</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">host: webhook.example.com</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p><strong>Body</strong></p><div class="codeBlockContainer_I0IT language-json theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-json codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;entity&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;shipments&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;018c7b7f-91d9-442d-ade4-eb72f95b9c15&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/shipments/018c7b7f-91d9-442d-ade4-eb72f95b9c15&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Shipment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@context&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/contexts/Shipment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;createdAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-05-05T09:01:26+02:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;shippedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-05-02T07:01:27+00:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;updatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-05-05T07:01:27+00:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;event&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;update&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;updatedFields&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;trackingStatus&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;destinationCarrier&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;entity&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;shipments&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;018c7b7f-91d9-442d-ade4-eb72f95b9c15&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/shipments/018c7b7f-91d9-442d-ade4-eb72f95b9c15&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Shipment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;email&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;@context&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/contexts/Shipment&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;createdAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-05-05T09:01:26+02:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;shippedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;updatedAt&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2021-05-05T07:01:27+00:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;event&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;update&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;updatedFields&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;originCarrier&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;handler&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;updatedAt&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="list-of-supported-webhook-entities-and-events">List of supported webhook entities and events<a class="hash-link" href="#list-of-supported-webhook-entities-and-events" title="Direct link to heading">​</a></h2><p>TrackMage allows to create one webhook for all supported entities and events.
But we recommend specifying separate webhooks for different entities and events.</p><p>Webhooks are available for the following entities:</p><ul><li><strong><a href="/docs/shipment/shipment.html">Shipment</a></strong></li><li><strong><a href="/docs/shipment/shipment-item.html">ShipmentItem</a></strong></li><li><strong><a href="/docs/order/order.html">Order</a></strong></li><li><strong><a href="/docs/order/order-item.html">OrderItem</a></strong></li><li><strong>Reviews</strong></li></ul><p>Webhooks can be triggered for the following events:</p><ul><li><strong>create</strong></li><li><strong>update</strong></li><li><strong>delete</strong></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="what-you-can-do-with-webhook-via-api">What you can do with Webhook via API<a class="hash-link" href="#what-you-can-do-with-webhook-via-api" title="Direct link to heading">​</a></h2><p>Webhooks are represented by <a href="/docs/workflow/workflow.html">Workflow</a> entity in the TrackMage API.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>In API request you should use <code>type: &quot;webhook&quot;</code> to be sure you work with webhook</p></div></div><p>In addition to standard <a href="/docs/workflow/workflow.html#workflow-properties">Workflow fields</a>, webhook has its own specified properties, which should be used in API requests.
A full list of specified properties can be retrieved by using request to <a href="/docs/custom-fields.html#getFieldCollection">Custom Fields</a> endpoint with GET parameter <code>entity=workflows.webhook</code>:</p><div class="codeBlockContainer_I0IT language-curl theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-curl codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain">https://api.trackmage.com/fields?entity=workflows.webhook</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Full list of available endpoints to create/update/edit webhooks available on the <a href="/docs/workflow/workflow.html#endpoints">workflow</a> page.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-programmatically-create-webhook">How to programmatically create webhook<a class="hash-link" href="#how-to-programmatically-create-webhook" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-php theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-php codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use TrackMage\Client\TrackMageClient;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $response = $client-&gt;post(&#x27;/workflows&#x27;, [&#x27;json&#x27; =&gt; [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;type&#x27; =&gt; &#x27;webhook&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;period&#x27; =&gt; &#x27;immediately&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;event&#x27; =&gt; &#x27;update&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;title&#x27; =&gt; &#x27;test webhook&#x27;, // webhook title</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;concurrency&#x27; =&gt; &#x27;1&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;workspace&#x27; =&gt; &#x27;/workspaces/&#x27; . $workspaceId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;url&#x27; =&gt; $targetUrl,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;enabled&#x27; =&gt; true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;entity&#x27; =&gt; $entity, // shipments|shipment_items|orders|order_items or null for any</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;event&#x27; =&gt; $event, // create|update|delete or null for any</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;field&#x27; =&gt; $field, // any field or null for any</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $data = TrackMageClient::item($response);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">} catch( ClientException $e ) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;Unable to create webhook: &#x27;.TrackMageClient::error($e));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="how-to-programmatically-delete-webhook">How to programmatically delete webhook<a class="hash-link" href="#how-to-programmatically-delete-webhook" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_I0IT language-php theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-php codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">use TrackMage\Client\TrackMageClient;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">try {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $response = $client-&gt;delete(&#x27;/workflows/&#x27;.$webhookId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">} catch( ClientException $e ) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    print(&#x27;Unable to delete webhook: &#x27;.TrackMageClient::error($e));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="how-to-handle-webhook-updates">How to handle webhook updates<a class="hash-link" href="#how-to-handle-webhook-updates" title="Direct link to heading">​</a></h2><p>This example shows you how to retrieve the webhook, validate Basic authentication it and save data to a CSV file.</p><div class="codeBlockContainer_I0IT language-php theme-code-block"><div class="codeBlockContent_wNvx" style="color:#bfc7d5;background-color:#292d3e"><pre tabindex="0" class="prism-code language-php codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">validateAuth(&#x27;trackmage&#x27;, &#x27;QwYDLKEYPWBoj74T2&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$trackings = extractTrackingsFromRequest();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$filename = extractFilenameFromRequest();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">saveTrackingsToFile($trackings, __DIR__.&#x27;/&#x27;.$filename.&#x27;.csv&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">print count($trackings).&quot; items processed&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function validateAuth($allowedLogin, $allowedPassword) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (!isset($_SERVER[&#x27;PHP_AUTH_USER&#x27;]) || !isset($_SERVER[&#x27;PHP_AUTH_PW&#x27;]) ||</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        $_SERVER[&#x27;PHP_AUTH_USER&#x27;] !== $allowedLogin || $_SERVER[&#x27;PHP_AUTH_PW&#x27;] !== $allowedPassword</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        header(&#x27;WWW-Authenticate: Basic realm=&quot;Restricted area&quot;&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        http_response_code(401);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        print &#x27;Unauthorized &#x27; . $_SERVER[&#x27;REQUEST_URI&#x27;] . &quot; from &quot; . $_SERVER[&#x27;REMOTE_ADDR&#x27;];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function extractFilenameFromRequest() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $host = $_SERVER[&#x27;HTTP_HOST&#x27;];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (false === $pos = strpos($host, &#x27;trackmagic-webhook.your-domain.com&#x27;)) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return &#x27;trackings-log&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return substr($host, 0, $pos-1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function extractTrackingsFromRequest() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if ($_SERVER[&#x27;REQUEST_METHOD&#x27;] !== &#x27;POST&#x27;) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        http_response_code(400);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        print &#x27;Request method must be POST&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $json = file_get_contents(&#x27;php://input&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $data = @json_decode($json, true);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (is_null($data) || !isset($data[&#x27;data&#x27;])) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        http_response_code(400);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        print &#x27;Bad json format&#x27;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        exit;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return $data[&#x27;data&#x27;];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function saveTrackingsToFile(array $trackings, $filename) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $file = new SplFileObject($filename, &#x27;a&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $timestamp = (new DateTime())-&gt;format(&#x27;c&#x27;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    foreach ($trackings as $tracking) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        $file-&gt;fputcsv([</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            $timestamp,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            $tracking[&#x27;trackingNumber&#x27;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            $tracking[&#x27;status&#x27;],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        ]);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/workflow/workflow.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Workflow</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/custom-fields.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Custom Fields</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-setup-the-webhooks" class="table-of-contents__link toc-highlight">How to setup the Webhooks</a></li><li><a href="#securing-webhooks" class="table-of-contents__link toc-highlight">Securing Webhooks</a></li><li><a href="#frequency-of-updates-and-concurrency" class="table-of-contents__link toc-highlight">Frequency of updates and Concurrency</a></li><li><a href="#anatomy-of-webhook" class="table-of-contents__link toc-highlight">Anatomy of Webhook</a></li><li><a href="#list-of-supported-webhook-entities-and-events" class="table-of-contents__link toc-highlight">List of supported webhook entities and events</a></li><li><a href="#what-you-can-do-with-webhook-via-api" class="table-of-contents__link toc-highlight">What you can do with Webhook via API</a><ul><li><a href="#how-to-programmatically-create-webhook" class="table-of-contents__link toc-highlight">How to programmatically create webhook</a></li><li><a href="#how-to-programmatically-delete-webhook" class="table-of-contents__link toc-highlight">How to programmatically delete webhook</a></li></ul></li><li><a href="#how-to-handle-webhook-updates" class="table-of-contents__link toc-highlight">How to handle webhook updates</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items"><li class="footer__item"><a href="https://trackmage.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">TrackMage<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://help.trackmage.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Users documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 OPTDEAL LIMITED, ALL RIGHTS RESERVED</div></div></div></footer></div>
<script src="/assets/js/runtime~main.3ebd573d.js"></script>
<script src="/assets/js/main.e6297e1f.js"></script>
</body>
</html>